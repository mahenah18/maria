require(["main"],function(){require(["config"],function(){require(["modules/PokemonDetail","models/applicationState","domReady"],function(e,t,n){n(function(){e.initialize({model:t})})})})}),define("pokemon-detail",function(){}),define("modules/BaseModule",["require"],function(e){var t={initialize:function(e){e=e||{},this.model=e.model,_.bindAll(this,"_initModule");var t=this.model.get("initialized");t?this._initModule():this.model.on("change:initialized",this._initModule)},_initModule:function(){}};return t}),define("views/PageNavigationView",["require","constants/Elements","underscore","gsapJS","backbone","views/BaseView","constants/Layout","pep"],function(e){var t=e("constants/Elements"),n=e("underscore"),r=e("gsapJS"),i=e("backbone"),s=e("views/BaseView"),o=e("constants/Layout"),u=e("pep"),a=s.extend({COLLAPSED_CLASS:"collapsed",EXPANDED_CLASS:"expanded",ANIMATE_OPEN_DURATION:.3,ANIMATE_CLOSED_DURATION:.3,ACTIVE_CLASS:"active",tagName:"ul",className:"page-navigation",events:function(){return{"pointerup .toggle div.page-navigation-header":"_onNavigationClick","pointerup .subnav li":"_onSubmenuClick"}},ui:{},initialize:function(e){e=e||{},n.bindAll(this,"_onNavigationClick","_onSubmenuClick","_closeNav","_openNav"),this.setElement(t(this.tagName+"."+this.className)),this.bindUIElements()},_onNavigationClick:function(e){var n=t(e.target).closest("li"),r=this.$el.find("li."+this.EXPANDED_CLASS);n.hasClass(this.EXPANDED_CLASS)?this._closeNav(n):(r&&this._closeNav(r),this._openNav(n))},_onSubmenuClick:function(e){var n=t(e.currentTarget);this.$el.find("li."+this.ACTIVE_CLASS).removeClass(this.ACTIVE_CLASS),n.addClass(this.ACTIVE_CLASS)},_closeNav:function(e){Modernizr.csstransitions?e.removeClass(this.EXPANDED_CLASS).addClass(this.COLLAPSED_CLASS):(e.removeClass(this.EXPANDED_CLASS).addClass(this.COLLAPSED_CLASS),r.gsap.to(e.find(".subnav"),this.ANIMATE_OPEN_DURATION,{height:"0","max-height":"0",ease:r.Cubic.Out}))},_openNav:function(e){Modernizr.csstransitions?e.removeClass(this.COLLAPSED_CLASS).addClass(this.EXPANDED_CLASS):(e.removeClass(this.COLLAPSED_CLASS).addClass(this.EXPANDED_CLASS),r.gsap.to(e.find(".subnav"),this.ANIMATE_CLOSED_DURATION,{height:"auto","max-height":"9999px",ease:r.Cubic.Out}))}});return a}),define("widgets/TabSwitcher",["require","jquery","gsapJS"],function(e){var t=e("jquery"),n=e("gsapJS"),r=function(e,t,n){this.controls=e,this.content=[];for(var r=0;r<t.length;r++)t[r].length>0&&this.content.push(t[r]);this.options=n,this._init()};return r.prototype={VISIBLE_CLASS:"active",_init:function(){this._addEventHandlers()},_swapContent:function(e){var r=this;n.gsap.to(this.content,.25,{opacity:0,onComplete:function(){_(r.content).each(function(i){if(t.isArray(i)){for(var s=0;s<i.length;s++)t(i[s]).removeClass(r.VISIBLE_CLASS);var o=i[e];for(var u=0;u<o.length;u++)t(o[u]).addClass(r.VISIBLE_CLASS),n.gsap.to(t(o[u]),.25,{opacity:1})}else i.removeClass(r.VISIBLE_CLASS),i.eq(e).addClass(r.VISIBLE_CLASS),n.gsap.to(i.eq(e),.25,{opacity:1})}),r.options&&r.options.onSwapComplete&&r.options.onSwapComplete()}})},_highlightButton:function(e){var t=this.controls;t.removeClass(this.VISIBLE_CLASS),t.eq(e).addClass(this.VISIBLE_CLASS)},_addEventHandlers:function(){var e,n,r=this,i="click";r.options&&r.options.eventType&&(i=r.options.eventType),this.controls.on(i,function(s){s.preventDefault(),i==="click"?(n=t(s.currentTarget),e=t(r.controls).index(n[0])):(n=t(s.currentTarget).find("option:selected"),e=n.val()),r._swapContent(e),r._highlightButton(e)})}},r}),define("views/pokedex/PokemonDetailView",["require","constants/Elements","underscore","backbone","events/UserEvent","views/BaseView","widgets/TabSwitcher","detection/mobileDevice","detection/nintendoDevice","events/TrackingEvent","views/ModalBaseView","gsapJS"],function(e){var t=e("constants/Elements"),n=e("underscore"),r=e("backbone"),i=e("events/UserEvent"),s=e("views/BaseView"),o=e("widgets/TabSwitcher"),u=e("detection/mobileDevice"),a=e("detection/nintendoDevice"),f=e("events/TrackingEvent"),l=e("views/ModalBaseView"),c=e("gsapJS"),h=s.extend({ADD_CLASS:"icon_add",ADDED_CLASS:"icon_pokedex_added",el:".pokedex",events:function(){return{"click .moreInfo":"_onMoreInfoClick","click .button-close":"_onCloseButtonClick","click .collectibles-wrapper .collectibles-collection a":"_toggleCollectiblesCollection","click .collectibles-wrapper .collectibles-wishlist a":"_toggleCollectiblesWishlist","click .collectibles-wrapper .collectibles-trade a":"_toggleCollectiblesTrade"}},ui:{detailPanel:".pokemon-ability-info-detail",favoritesButton:"#addToFavorites",formAtributes:".pokedex-pokemon-attributes",formButtons:"#formes",formImages:".profile-images img",formInfo:".pokemon-ability-info",formStats:".pokemon-stats-info",versionDescriptions:".version-descriptions",versionButtons:[t("span.version-label.version-x")[0],t("span.version-label.version-y")[0]],versionXDescriptions:".version-descriptions p.version-x",versionYDescriptions:".version-descriptions p.version-y",gauge:".gauge",activeGauges:".pokemon-stats-info.active .gauge",authRequired:"#pokedex-auth-error-modal"},_addedLabel:null,_pokemonId:null,_toggleFavoritesIcon:!0,initialize:function(e){e=e||{},n.bindAll(this,"_showInfoPanel","_closeInfoPanel","_animateStats","_gaTrackingFormClick","_addToFavorites","_onMoreInfoClick","_onCloseButtonClick","_onAddToFavoritesClick"),this.bindUIElements();var r=new o(this.ui.formButtons,[this.ui.formAtributes,this.ui.versionDescriptions,this.ui.formImages,this.ui.formInfo,this.ui.formStats],{onSwapComplete:this._animateStats,eventType:"change"}),i=new o(this.ui.versionButtons,[[this.ui.versionXDescriptions,this.ui.versionYDescriptions]]);this._addedLabel=this.ui.favoritesButton.data("added")||"",this._pokemonId=t(".addToFavorites").data("pokemon-id"),this.ui.formButtons.on("change",this._gaTrackingFormClick),this._animateStats()},_showInfoPanel:function(e){e.css({display:"block"}),c.gsap.to(e,.2,{opacity:1,ease:c.Sine.easeInOut})},_closeInfoPanel:function(e){c.gsap.to(e,.2,{opacity:0,ease:c.Sine.easeInOut,onComplete:function(){e.css({display:"none"})}})},_animateStats:function(){var e=this.ui.gauge.find('li:not(".meter")').length/this.ui.gauge.length,r=[];n(this.ui.gauge).each(function(n){var i=t(n).find(".meter"),s=i.data("value"),o=100/(e/s);o=100-o;var u={top:o+"%",ease:c.Back.easeInOut.config(2)};t(n).closest(".pokemon-stats-info").hasClass("active")?r.push(c.gsap.to(i,2,u)):c.gsap.set(i,u)});var i=c.gsap.timeline({paused:!0,align:"normal",stagger:.1,tweens:n.shuffle(r)});u||a?i.seek(15):i.play()},_gaTrackingFormClick:function(e){var n=t(e.target).val();n&&t.publish(f.TRACK,["1.11.1",{label:n}])},_addToFavorites:function(e){var n=e.children("i");this.ui.favoritesButton.off("click",this._onAddToFavoritesClick),e.attr("title",this._addedLabel),this._toggleFavoritesIcon&&(n.removeClass(this.ADD_CLASS),n.addClass(this.ADDED_CLASS)),t.publish(i.ADD_TO_FAVORITES,this._pokemonId)},_onMoreInfoClick:function(e){e.preventDefault();var n=t(e.currentTarget),r=n.closest("li").index(),i=n.closest(".pokemon-ability-info").find(".pokemon-ability-info-detail").eq(r);this._showInfoPanel(i)},_onCloseButtonClick:function(e){e.preventDefault();var n=t(e.currentTarget).parent();this._closeInfoPanel(n)},_onAddToFavoritesClick:function(e){e.preventDefault();var r=t(e.currentTarget);return r.removeAttr("rel"),r.trigger("mouseleave"),n.defer(this._addToFavorites,r),!1}});return h}),define("modules/PokemonDetail",["require","jquery","underscore","modules/BaseModule","views/PageNavigationView","views/pokedex/PokemonDetailView"],function(e){var t=e("jquery"),n=e("underscore"),r=e("modules/BaseModule"),i=e("views/PageNavigationView"),s=e("views/pokedex/PokemonDetailView"),o=n.extend(r,{_initModule:function(){t(".container").addClass("pokedex"),this._addViews()},_addViews:function(){var e=new i({el:".page-navigation"}),t=new s}});return o});